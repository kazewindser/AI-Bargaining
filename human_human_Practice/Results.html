{% extends 'global/Page.html' %}
{% block title %}練習結果 {% endblock %}

{% block content %}

<div style="background-color: #fff3cd; border: 2px solid #ffc107; padding: 15px; margin-bottom: 20px; border-radius: 5px;">
    <h3 style="margin-top: 0; color: #856404;">
        ✅ 練習ラウンド完了
    </h3>
    <p style="color: #856404; margin-bottom: 0;">
        <b>この結果は最終的な報酬に含まれません。</b><br>
        次のページから正式な実験が始まります。
    </p>
</div>

<h3>練習ラウンドの結果</h3>

{% if accepted %}
    <p role="status" aria-live="polite"
       style="background-color:#e8f5e9;border-left:4px solid #4caf50;
              padding:12px 15px;margin:20px 0;border-radius:5px;
              color:#2e7d32;">
      ✓ 提案は第 {{ stage }} ステージで受け入れられました
    </p>
{% else %}
    <p role="alert"
       style="background-color:#ffebee;border-left:4px solid #f44336;
              padding:12px 15px;margin:20px 0;border-radius:5px;
              color:#c62828;">
      ✗ 提案は拒否されました(第 {{ stage }} ステージまで到達)
    </p>
{% endif %}

<hr>

<div style="background-color: #f5f5f5; padding: 15px; border-radius: 5px; margin: 20px 0;">
    <h4 style="margin-top: 0;">📋 結果の詳細 / Result Details</h4>

    <table style="width: 100%; border-collapse: collapse;">
        <tr>
            <td style="padding: 8px; border-bottom: 1px solid #ddd;"><b>あなたの役割:</b></td>
            <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: right;">
                <span style="color: #2196F3; font-weight: bold;">{{ my_role }}</span>
            </td>
        </tr>
        <tr>
            <td style="padding: 8px; border-bottom: 1px solid #ddd;"><b>最終ステージ:</b></td>
            <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: right;">{{ stage }}</td>
        </tr>
        <tr>
            <td style="padding: 8px; border-bottom: 1px solid #ddd;"><b>最終オファー:</b></td>
            <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: right;">{{ offer }} ポイント</td>
        </tr>
        {% if accepted %}
        <tr>
            <td style="padding: 8px; border-bottom: 1px solid #ddd;"><b>獲得した原ポイント:</b></td>
            <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: right;">{{ my_original_points }} ポイント</td>
        </tr>
        {% endif %}
    </table>
</div>

<hr>

<div style="background-color: #e3f2fd; border-left: 4px solid #2196F3; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h4 style="margin-top: 0; color: #1565C0;">💰 あなたの得点(割引後)</h4>
    <p style="font-size: 1.5em; margin: 10px 0; color: #1565C0; font-weight: bold;">
        {{ my_payoff }} ポイント
    </p>
    <p style="color: #424242; font-size: 0.9em; margin-bottom: 0;">
        ※ 練習なので、この得点は報酬に<b>反映されません</b>
    </p>
</div>

<hr>

<div style="background-color: #fff9e6; border: 2px dashed #ffa726; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h4 style="margin-top: 0; color: #ef6c00;">
        <b>準備ができたら「次へ」をクリックして正式実験を開始してください。</b>
</div>

{% next_button %}

{% endblock %}